{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/fortunephiri/Documents/Projects/roomR8r/src/stepper/stepper_components/googleMapsSearchBar.js\";\nimport React, { Component } from 'react';\nimport { SearchBar } from \"../../components\";\nimport Script from \"react-load-script\";\nimport { connect } from \"react-redux\";\nimport { setAddress } from \"../../../store/actions/appActions\";\n\nclass GoogleMapsSearchBar extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleScriptLoad\", () => {\n      /***loads google script on load and \n       * declares the options for autocomplete */\n      const options = {\n        // types: ['(cities)'],\n        componentRestrictions: {\n          country: 'ca' //setting results to canada\n\n        }\n      }; // Initialize Google Autocomplete\n\n      const autocomplete = new google.maps.places.Autocomplete(document.getElementById('autocomplete'), options); // Avoid paying for data that you don't need by restricting the set of\n      // place fields that are returned to just the address components.\n\n      autocomplete.setFields(['address_components']); // Fire Event when a suggested name is selected\n\n      autocomplete.addListener('place_changed', () => this.handlePlaceSelect(autocomplete));\n    });\n\n    _defineProperty(this, \"handlePlaceSelect\", autocomplete => {\n      // Extract City From Address Object\n      let addressObject = autocomplete.getPlace();\n      let address = addressObject.address_components; // Check if address is valid\n\n      if (address) {\n        this.props.setAddressData(address);\n      }\n    });\n\n    _defineProperty(this, \"onChangeHandler\", (input, name = null) => {\n      /** handles the input change in search bar*/\n      this.setState({\n        queryString: input\n      });\n    });\n\n    this.state = {\n      queryString: \"\"\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.addressData) {\n      const {\n        addressData\n      } = this.props;\n      this.setState({\n        queryString: `${addressData[0].long_name} ${addressData[1].long_name}, ${addressData[2].long_name}, ${addressData[5].long_name}`\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.addressData !== prevProps.addressData) {\n      const {\n        addressData\n      } = this.props;\n      this.setState({\n        address: addressData,\n        queryString: `${addressData[0].long_name} ${addressData[1].long_name}, ${addressData[2].long_name}, ${addressData[5].long_name}`\n      });\n    }\n  }\n  /******start of google maps functions */\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(Script, {\n      url: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyBWcDVGfs8R5EmWbh9xsuYEHycoqDyDf9I&libraries=places\",\n      onLoad: this.handleScriptLoad,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(SearchBar, {\n      style: styles.searchBar,\n      id: \"autocomplete\",\n      onChange: this.onChangeHandler,\n      placeholder: \"X5X-X5X\",\n      value: this.state.queryString,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    addressData: state.app.stepperFormData.addressData\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setAddressData: address => dispatch(setAddress(address))\n  };\n};\n\nconst styles = {\n  searchBar: {\n    backgroundColor: \"#fffffa\",\n    width: \"320px\"\n  }\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(GoogleMapsSearchBar);","map":{"version":3,"sources":["/Users/fortunephiri/Documents/Projects/roomR8r/src/stepper/stepper_components/googleMapsSearchBar.js"],"names":["React","Component","SearchBar","Script","connect","setAddress","GoogleMapsSearchBar","constructor","props","options","componentRestrictions","country","autocomplete","google","maps","places","Autocomplete","document","getElementById","setFields","addListener","handlePlaceSelect","addressObject","getPlace","address","address_components","setAddressData","input","name","setState","queryString","state","componentDidMount","addressData","long_name","componentDidUpdate","prevProps","prevState","render","handleScriptLoad","styles","searchBar","onChangeHandler","mapStateToProps","app","stepperFormData","mapDispatchToProps","dispatch","backgroundColor","width"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\n\nimport {SearchBar} from \"../../components\"\nimport Script from \"react-load-script\"\nimport {connect} from \"react-redux\"\n\nimport {setAddress} from \"../../../store/actions/appActions\"\n\nclass GoogleMapsSearchBar extends Component{\n  constructor(props){\n    super(props)\n    this.state={\n      queryString:\"\",\n    }\n  }\n  componentDidMount(){\n    if(this.props.addressData){\n      const {addressData} =this.props\n      this.setState({\n        queryString:`${addressData[0].long_name} ${addressData[1].long_name}, ${addressData[2].long_name}, ${addressData[5].long_name}`\n      })\n    }\n  }\n\n  componentDidUpdate(prevProps,prevState){\n    if(this.props.addressData !== prevProps.addressData){\n      const {addressData} =this.props\n      this.setState({\n        address: addressData,\n        queryString:`${addressData[0].long_name} ${addressData[1].long_name}, ${addressData[2].long_name}, ${addressData[5].long_name}`\n      })\n    }\n  }\n\n  /******start of google maps functions */\n  handleScriptLoad=()=>{\n    /***loads google script on load and \n     * declares the options for autocomplete */\n    const options = {\n      // types: ['(cities)'],\n      componentRestrictions: {country: 'ca'}  //setting results to canada\n    };\n    // Initialize Google Autocomplete\n     const autocomplete = new google.maps.places.Autocomplete(\n      document.getElementById('autocomplete'),\n      options,\n    );\n    \n    // Avoid paying for data that you don't need by restricting the set of\n    // place fields that are returned to just the address components.\n    autocomplete.setFields(['address_components']);\n    \n    // Fire Event when a suggested name is selected\n    autocomplete.addListener('place_changed', ()=>this.handlePlaceSelect(autocomplete))\n    }\n    \n  handlePlaceSelect=(autocomplete)=>{\n    // Extract City From Address Object\n    let addressObject = autocomplete.getPlace();\n    let address = addressObject.address_components;\n    \n    // Check if address is valid\n    if (address) {\n      this.props.setAddressData(address)\n    }\n  }\n  /** end of google maps functions ************/\n\n  onChangeHandler=(input, name=null)=>{\n    /** handles the input change in search bar*/ \n    this.setState({queryString:input})\n  }\n\n  render(){\n    return(\n      <div>\n        <Script\n          url=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBWcDVGfs8R5EmWbh9xsuYEHycoqDyDf9I&libraries=places\"\n          onLoad={this.handleScriptLoad}\n        />\n        <SearchBar\n          style={styles.searchBar}\n          id=\"autocomplete\"\n          onChange={this.onChangeHandler}\n          placeholder=\"X5X-X5X\"\n          value={this.state.queryString}\n        />\n      </div>)\n  }\n}\n\nconst mapStateToProps=(state)=>{\n  return{\n    addressData: state.app.stepperFormData.addressData\n  }\n}\n\nconst mapDispatchToProps=(dispatch)=>{\n  return{\n    setAddressData:(address)=>dispatch(setAddress(address))\n  }\n}\n\nconst styles ={\n  searchBar:{\n    backgroundColor:\"#fffffa\",\n    width:\"320px\"\n  }\n}\nexport default connect(mapStateToProps,mapDispatchToProps)(GoogleMapsSearchBar)"]},"metadata":{},"sourceType":"module"}