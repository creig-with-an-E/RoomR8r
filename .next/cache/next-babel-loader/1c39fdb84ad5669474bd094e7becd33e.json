{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/fortunephiri/Documents/Projects/roomR8r/pages/index.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nimport { parseCookies } from \"../lib/parseCookies\";\nimport { ReviewCard, Layout, Spinner, SearchBar } from \"../src/components\";\nimport AddReviewForm from \"../src/modal/addReviewForm\";\nimport * as appActions from \"../store/actions/appActions\";\nimport * as authActions from \"../store/actions/authActions\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      address: \"\",\n      modalVisible: false,\n      startingUp: true,\n      addressError: false\n    });\n\n    _defineProperty(this, \"onAddressChangeHandler\", input => {\n      console.log(this.state.address); //handles user input and stores in local state\n\n      const valid = this.isValidatePostalCode(input);\n\n      if (valid) {\n        console.log(valid);\n        this.setState({\n          addressError: false,\n          address: input.toUpperCase()\n        });\n        return;\n      }\n\n      this.setState({\n        addressError: !valid\n      });\n    });\n\n    _defineProperty(this, \"isValidatePostalCode\", input => {\n      // validates the postal code to fit canadian format of X1X-X1X\n      const val = input.split(\"\");\n      let valid = true;\n      val.forEach((element, index) => {\n        if (index % 2 !== 0) {\n          valid = valid && !isNaN(_parseInt(element));\n        } else {\n          // validates the strings are in the right place by canadian postal code format\n          valid = valid && /^[A-Za-z_]/.test(element);\n        }\n      });\n      return valid;\n    });\n\n    _defineProperty(this, \"searchByAddressHandler\", event => {\n      this.props.findByAddress(this.props.userToken, this.state.address);\n    });\n\n    _defineProperty(this, \"showModalHandle\", () => {\n      this.setState({\n        modalVisible: true\n      });\n    });\n\n    _defineProperty(this, \"hideModalHandle\", () => {\n      this.setState({\n        modalVisible: false\n      });\n    });\n  }\n\n  componentDidMount() {\n    if (!this.props.savedToken) {\n      Router.replace(\"/auth\");\n    } else {\n      this.props.updateSavedToken(this.props.savedToken);\n    }\n  }\n\n  render() {\n    const cards = this.props.searchResults.map(element => React.createElement(ReviewCard, {\n      data: element,\n      key: element.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }));\n    const spinner = !this.props.loading ? null : React.createElement(Spinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }); // showModal is passed down to Layout\n\n    return React.createElement(Layout, {\n      showModalHandle: this.showModalHandle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(AddReviewForm, {\n      userToken: this.props.userToken,\n      modalVisible: this.state.modalVisible,\n      hideModalHandle: this.hideModalHandle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        marginTop: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: styles.headerStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Because not all landlords are built the same\")), React.createElement(\"section\", {\n      style: styles.sectionStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(SearchBar, {\n      invalid: this.state.addressError ? true : false,\n      placeholder: \"X5X-X5X\",\n      value: this.state.address,\n      onChange: this.onAddressChangeHandler,\n      onRequestSearch: this.searchByAddressHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      style: styles.errorStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \" \", this.state.addressError ? \"Acceptable format is X9X9X9\" : \"\", \" \"), React.createElement(\"p\", {\n      style: styles.searchHeading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Search for reviews by Postal Code\"), spinner), cards.length !== 0 ? React.createElement(\"div\", {\n      style: {\n        overflowY: \"scroll\",\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, cards) : null);\n  }\n\n}\n\n_defineProperty(App, \"getInitialProps\", ({\n  req\n}) => {\n  const cookie = parseCookies(req);\n  return {\n    savedToken: cookie.userToken\n  };\n});\n\nconst styles = {\n  headerStyle: {\n    fontSize: 24,\n    color: \"rgb(44,54,94)\",\n    textAlign: \"center\",\n    fontFamily: 'Lexend Tera, sans-serif',\n    fontWeight: \"bold\"\n  },\n  sectionStyle: {\n    alignSelf: \"center\",\n    marginTop: \"5px\",\n    padding: \"20px\",\n    width: \"380px\",\n    textAlign: \"center\"\n  },\n  searchHeading: {\n    fontSize: 16,\n    marginTop: 20,\n    color: \"rgb(44,54,94)\",\n    fontWeight: \"bold\",\n    fontFamily: \"Poppins, sans serif\"\n  },\n  errorStyle: {\n    color: \"rgb(255,89,65)\",\n    fontWeight: \"bold\",\n    fontFamily: \"Poppins, sans serif\"\n  }\n};\n\nconst mapStateToProps = state => {\n  return {\n    userToken: state.auth.userToken,\n    searchResults: state.app.searchResults,\n    loading: state.app.loading\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateSavedToken: token => dispatch(authActions.updateSavedToken(token)),\n    findByAddress: (userToken, address) => dispatch(appActions.findReviewByAddress(userToken, address))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/fortunephiri/Documents/Projects/roomR8r/pages/index.js"],"names":["React","Component","connect","Router","parseCookies","ReviewCard","Layout","Spinner","SearchBar","AddReviewForm","appActions","authActions","App","address","modalVisible","startingUp","addressError","input","console","log","state","valid","isValidatePostalCode","setState","toUpperCase","val","split","forEach","element","index","isNaN","test","event","props","findByAddress","userToken","componentDidMount","savedToken","replace","updateSavedToken","render","cards","searchResults","map","id","spinner","loading","showModalHandle","hideModalHandle","marginTop","styles","headerStyle","sectionStyle","onAddressChangeHandler","searchByAddressHandler","errorStyle","searchHeading","length","overflowY","width","req","cookie","fontSize","color","textAlign","fontFamily","fontWeight","alignSelf","padding","mapStateToProps","auth","app","mapDispatchToProps","dispatch","token","findReviewByAddress"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAAQC,YAAR,QAA2B,qBAA3B;AAEA,SAAQC,UAAR,EAAoBC,MAApB,EAA4BC,OAA5B,EAAqCC,SAArC,QAAsD,mBAAtD;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,OAAO,KAAKC,UAAZ,MAA4B,6BAA5B;AACA,OAAO,KAAKC,WAAZ,MAA6B,8BAA7B;;AAEA,MAAMC,GAAN,SAAkBX,SAAlB,CAA4B;AAAA;AAAA;;AAAA,mCAgBlB;AACNY,MAAAA,OAAO,EAAE,EADH;AAENC,MAAAA,YAAY,EAAE,KAFR;AAGNC,MAAAA,UAAU,EAAE,IAHN;AAINC,MAAAA,YAAY,EAAC;AAJP,KAhBkB;;AAAA,oDAuBDC,KAAK,IAAI;AAChCC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWP,OAAvB,EADgC,CAEhC;;AACA,YAAMQ,KAAK,GAAG,KAAKC,oBAAL,CAA0BL,KAA1B,CAAd;;AACE,UAAGI,KAAH,EAAS;AACTH,QAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACA,aAAKE,QAAL,CAAc;AACbP,UAAAA,YAAY,EAAC,KADA;AAEbH,UAAAA,OAAO,EAAEI,KAAK,CAACO,WAAN;AAFI,SAAd;AAIF;AACC;;AACD,WAAKD,QAAL,CAAc;AAACP,QAAAA,YAAY,EAAC,CAACK;AAAf,OAAd;AACD,KApCyB;;AAAA,kDAsCJJ,KAAD,IAAS;AAC5B;AACA,YAAMQ,GAAG,GAAGR,KAAK,CAACS,KAAN,CAAY,EAAZ,CAAZ;AACA,UAAIL,KAAK,GAAG,IAAZ;AACAI,MAAAA,GAAG,CAACE,OAAJ,CAAY,CAACC,OAAD,EAASC,KAAT,KAAiB;AAC3B,YAAIA,KAAK,GAAG,CAAT,KAAgB,CAAnB,EAAqB;AACnBR,UAAAA,KAAK,GAAGA,KAAK,IAAI,CAACS,KAAK,CAAC,UAASF,OAAT,CAAD,CAAvB;AACD,SAFD,MAEK;AACH;AACAP,UAAAA,KAAK,GAAGA,KAAK,IAAI,aAAaU,IAAb,CAAkBH,OAAlB,CAAjB;AACD;AACF,OAPD;AAQA,aAAOP,KAAP;AACD,KAnDyB;;AAAA,oDAoDDW,KAAK,IAAI;AAChC,WAAKC,KAAL,CAAWC,aAAX,CAAyB,KAAKD,KAAL,CAAWE,SAApC,EAA+C,KAAKf,KAAL,CAAWP,OAA1D;AACD,KAtDyB;;AAAA,6CAwDV,MAAI;AAClB,WAAKU,QAAL,CAAc;AAACT,QAAAA,YAAY,EAAE;AAAf,OAAd;AACD,KA1DyB;;AAAA,6CA4DV,MAAI;AAClB,WAAKS,QAAL,CAAc;AAACT,QAAAA,YAAY,EAAE;AAAf,OAAd;AACD,KA9DyB;AAAA;;AAQ1BsB,EAAAA,iBAAiB,GAAE;AACjB,QAAG,CAAC,KAAKH,KAAL,CAAWI,UAAf,EAA0B;AACxBlC,MAAAA,MAAM,CAACmC,OAAP,CAAe,OAAf;AACD,KAFD,MAEK;AACH,WAAKL,KAAL,CAAWM,gBAAX,CAA4B,KAAKN,KAAL,CAAWI,UAAvC;AACD;AACF;;AAiDDG,EAAAA,MAAM,GAAG;AACP,UAAMC,KAAK,GAAG,KAAKR,KAAL,CAAWS,aAAX,CAAyBC,GAAzB,CAA6Bf,OAAO,IAAE,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,OAAlB;AAA2B,MAAA,GAAG,EAAEA,OAAO,CAACgB,EAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAtC,CAAd;AACA,UAAMC,OAAO,GAAG,CAAC,KAAKZ,KAAL,CAAWa,OAAZ,GAAsB,IAAtB,GAA6B,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA7C,CAFO,CAGP;;AACA,WACE,oBAAC,MAAD;AAAQ,MAAA,eAAe,EAAE,KAAKC,eAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,aAAD;AACI,MAAA,SAAS,EAAE,KAAKd,KAAL,CAAWE,SAD1B;AAEI,MAAA,YAAY,EAAE,KAAKf,KAAL,CAAWN,YAF7B;AAGI,MAAA,eAAe,EAAE,KAAKkC,eAH1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAME;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,SAAS,EAAC;AAAX,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,KAAK,EAAEC,MAAM,CAACC,WAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDADF,CANF,EAWE;AAAS,MAAA,KAAK,EAAED,MAAM,CAACE,YAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AACE,MAAA,OAAO,EAAE,KAAKhC,KAAL,CAAWJ,YAAX,GAA0B,IAA1B,GAAiC,KAD5C;AAEE,MAAA,WAAW,EAAC,SAFd;AAGE,MAAA,KAAK,EAAE,KAAKI,KAAL,CAAWP,OAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKwC,sBAJjB;AAKE,MAAA,eAAe,EAAE,KAAKC,sBALxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAG,MAAA,KAAK,EAAEJ,MAAM,CAACK,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA+B,KAAKnC,KAAL,CAAWJ,YAAX,GAA0B,6BAA1B,GAA0D,EAAzF,MARF,EASE;AAAG,MAAA,KAAK,EAAEkC,MAAM,CAACM,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CATF,EAUGX,OAVH,CAXF,EAuBIJ,KAAK,CAACgB,MAAN,KAAiB,CAAjB,GAAqB;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,SAAS,EAAC,QAAX;AAAqBC,QAAAA,KAAK,EAAC;AAA3B,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiDlB,KAAjD,CAArB,GAAoF,IAvBxF,CADF;AA2BD;;AA9FyB;;gBAAtB7B,G,qBACmB,CAAC;AAACgD,EAAAA;AAAD,CAAD,KAAS;AAC9B,QAAMC,MAAM,GAAGzD,YAAY,CAACwD,GAAD,CAA3B;AACA,SAAO;AACLvB,IAAAA,UAAU,EAAEwB,MAAM,CAAC1B;AADd,GAAP;AAGD,C;;AA2FH,MAAMe,MAAM,GAAG;AACbC,EAAAA,WAAW,EAAC;AACVW,IAAAA,QAAQ,EAAE,EADA;AAEVC,IAAAA,KAAK,EAAE,eAFG;AAGVC,IAAAA,SAAS,EAAE,QAHD;AAIVC,IAAAA,UAAU,EAAC,yBAJD;AAKVC,IAAAA,UAAU,EAAC;AALD,GADC;AAQbd,EAAAA,YAAY,EAAC;AACXe,IAAAA,SAAS,EAAC,QADC;AAEXlB,IAAAA,SAAS,EAAC,KAFC;AAGXmB,IAAAA,OAAO,EAAE,MAHE;AAIXT,IAAAA,KAAK,EAAE,OAJI;AAKXK,IAAAA,SAAS,EAAE;AALA,GARA;AAebR,EAAAA,aAAa,EAAC;AACZM,IAAAA,QAAQ,EAAC,EADG;AAEZb,IAAAA,SAAS,EAAC,EAFE;AAGZc,IAAAA,KAAK,EAAE,eAHK;AAIZG,IAAAA,UAAU,EAAC,MAJC;AAKZD,IAAAA,UAAU,EAAC;AALC,GAfD;AAsBbV,EAAAA,UAAU,EAAC;AACTQ,IAAAA,KAAK,EAAC,gBADG;AAETG,IAAAA,UAAU,EAAC,MAFF;AAGTD,IAAAA,UAAU,EAAC;AAHF;AAtBE,CAAf;;AA6BA,MAAMI,eAAe,GAAEjD,KAAD,IAAS;AAC7B,SAAM;AACJe,IAAAA,SAAS,EAAEf,KAAK,CAACkD,IAAN,CAAWnC,SADlB;AAEJO,IAAAA,aAAa,EAACtB,KAAK,CAACmD,GAAN,CAAU7B,aAFpB;AAGJI,IAAAA,OAAO,EAAE1B,KAAK,CAACmD,GAAN,CAAUzB;AAHf,GAAN;AAKD,CAND;;AAQA,MAAM0B,kBAAkB,GAAEC,QAAD,IAAY;AACnC,SAAM;AACJlC,IAAAA,gBAAgB,EAAEmC,KAAD,IAASD,QAAQ,CAAC9D,WAAW,CAAC4B,gBAAZ,CAA6BmC,KAA7B,CAAD,CAD9B;AAEJxC,IAAAA,aAAa,EAAC,CAACC,SAAD,EAAWtB,OAAX,KAAqB4D,QAAQ,CAAC/D,UAAU,CAACiE,mBAAX,CAA+BxC,SAA/B,EAAyCtB,OAAzC,CAAD;AAFvC,GAAN;AAID,CALD;;AAOA,eAAeX,OAAO,CAACmE,eAAD,EAAkBG,kBAAlB,CAAP,CAA6C5D,GAA7C,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport {connect} from \"react-redux\"\nimport Router from \"next/router\"\nimport {parseCookies} from \"../lib/parseCookies\"\n\nimport {ReviewCard, Layout, Spinner, SearchBar } from \"../src/components\"\nimport AddReviewForm from \"../src/modal/addReviewForm\"\nimport * as appActions from \"../store/actions/appActions\"\nimport * as authActions from \"../store/actions/authActions\"\n\nclass App extends Component {\n  static getInitialProps=({req})=>{\n    const cookie = parseCookies(req)\n    return {\n      savedToken: cookie.userToken\n    }\n  }\n\n  componentDidMount(){\n    if(!this.props.savedToken){\n      Router.replace(\"/auth\")\n    }else{\n      this.props.updateSavedToken(this.props.savedToken)\n    }\n  }\n\n  state = {\n    address: \"\",\n    modalVisible: false,\n    startingUp: true,\n    addressError:false\n  };\n\n  onAddressChangeHandler = input => {\n    console.log(this.state.address)\n    //handles user input and stores in local state\n    const valid = this.isValidatePostalCode(input)\n      if(valid){\n      console.log(valid)\n      this.setState({\n       addressError:false,\n       address: input.toUpperCase()\n    })\n    return\n    }\n    this.setState({addressError:!valid})\n  };\n\n  isValidatePostalCode=(input)=>{\n    // validates the postal code to fit canadian format of X1X-X1X\n    const val = input.split(\"\")\n    let valid = true\n    val.forEach((element,index)=>{\n      if((index % 2) !== 0){\n        valid = valid && !isNaN(parseInt(element)) \n      }else{\n        // validates the strings are in the right place by canadian postal code format\n        valid = valid && /^[A-Za-z_]/.test(element)\n      }\n    })\n    return valid\n  }\n  searchByAddressHandler = event => {\n    this.props.findByAddress(this.props.userToken, this.state.address)\n  }\n\n  showModalHandle=()=>{\n    this.setState({modalVisible: true})\n  }\n\n  hideModalHandle=()=>{\n    this.setState({modalVisible: false})\n  } \n  render() {\n    const cards = this.props.searchResults.map(element=><ReviewCard data={element} key={element.id} />)\n    const spinner = !this.props.loading ? null : <Spinner />;\n    // showModal is passed down to Layout\n    return (\n      <Layout showModalHandle={this.showModalHandle}>\n        <AddReviewForm \n            userToken={this.props.userToken}\n            modalVisible={this.state.modalVisible}\n            hideModalHandle={this.hideModalHandle}>\n        </AddReviewForm>\n        <div style={{marginTop:\"60px\"}}>\n          <h2 style={styles.headerStyle}>\n            Because not all landlords are built the same\n          </h2>\n        </div>\n        <section style={styles.sectionStyle}>\n          <SearchBar\n            invalid={this.state.addressError ? true : false}\n            placeholder=\"X5X-X5X\"\n            value={this.state.address}\n            onChange={this.onAddressChangeHandler}\n            onRequestSearch={this.searchByAddressHandler}\n          />\n          <p style={styles.errorStyle}> {this.state.addressError ? \"Acceptable format is X9X9X9\" : \"\"} </p>\n          <p style={styles.searchHeading}>Search for reviews by Postal Code</p>\n          {spinner}\n        </section>            \n        { cards.length !== 0 ? <div style={{overflowY:\"scroll\", width:\"100%\"}}>{cards}</div>: null}\n      </Layout>\n    );\n  }\n}\n\nconst styles = {\n  headerStyle:{\n    fontSize: 24,\n    color: \"rgb(44,54,94)\", \n    textAlign: \"center\",\n    fontFamily:'Lexend Tera, sans-serif',\n    fontWeight:\"bold\"\n  },\n  sectionStyle:{\n    alignSelf:\"center\",\n    marginTop:\"5px\",\n    padding: \"20px\",\n    width: \"380px\",\n    textAlign: \"center\",\n  },\n  searchHeading:{\n    fontSize:16,\n    marginTop:20,\n    color: \"rgb(44,54,94)\", \n    fontWeight:\"bold\",\n    fontFamily:\"Poppins, sans serif\"\n  },\n  errorStyle:{\n    color:\"rgb(255,89,65)\",\n    fontWeight:\"bold\",\n    fontFamily:\"Poppins, sans serif\"\n  }\n};\n\nconst mapStateToProps=(state)=>{\n  return{\n    userToken: state.auth.userToken,\n    searchResults:state.app.searchResults,\n    loading: state.app.loading\n  }\n}\n\nconst mapDispatchToProps=(dispatch)=>{\n  return{\n    updateSavedToken:(token)=>dispatch(authActions.updateSavedToken(token)),\n    findByAddress:(userToken,address)=>dispatch(appActions.findReviewByAddress(userToken,address))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}